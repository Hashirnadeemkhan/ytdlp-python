<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>YouTube Downloader</title>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <style>
        body {
            background: linear-gradient(135deg, #6366f1 0%, #a855f7 100%);
            min-height: 100vh;
            font-family: 'Inter', sans-serif;
        }
        .container {
            max-width: 32rem;
            background: white;
            border-radius: 1rem;
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1);
        }
        .btn-primary {
            background: #4f46e5;
            transition: all 0.3s ease;
        }
        .btn-primary:hover {
            background: #4338ca;
            transform: translateY(-2px);
        }
        .progress-container {
            display: none;
        }
        .progress-bar {
            transition: width 0.3s ease;
            background: linear-gradient(to right, #4f46e5, #a855f7);
        }
        .radio-input:checked {
            background-color: #4f46e5;
            border-color: #4f46e5;
        }
        .animate-pulse {
            animation: pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite;
        }
        @keyframes pulse {
            0%, 100% {
                opacity: 1;
            }
            50% {
                opacity: 0.5;
            }
        }
    </style>
</head>
<body class="flex items-center justify-center p-4">
    <div class="container p-8">
        <h2 class="text-2xl font-bold text-center text-gray-800 mb-6">YouTube Downloader</h2>
        <form id="download-form" method="POST" action="/download" class="space-y-4">
            <div>
                <input type="text" name="url" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent" placeholder="Enter YouTube URL" required>
            </div>
            <div>
                <p class="text-sm font-medium text-gray-700 mb-2">Download as:</p>
                <div class="flex space-x-4">
                    <label class="flex items-center">
                        <input type="radio" name="format" value="video" class="radio-input h-4 w-4 text-indigo-600" checked>
                        <span class="ml-2 text-gray-700">Video</span>
                    </label>
                    <label class="flex items-center">
                        <input type="radio" name="format" value="audio" class="radio-input h-4 w-4 text-indigo-600">
                        <span class="ml-2 text-gray-700">Audio (MP3)</span>
                    </label>
                </div>
            </div>
            <button type="submit" class="btn-primary w-full py-2 px-4 text-white font-medium rounded-lg shadow">Download</button>
        </form>
        <div id="progress-container" class="progress-container mt-4">
            <div class="w-full bg-gray-200 rounded-full h-4">
                <div id="progress-bar" class="progress-bar h-4 rounded-full" style="width: 0%"></div>
            </div>
            <p id="progress-text" class="text-center text-sm text-gray-600 mt-2">0%</p>
        </div>
    </div>

    <script>
        const form = document.getElementById('download-form');
        const progressContainer = document.getElementById('progress-container');
        const progressBar = document.getElementById('progress-bar');
        const progressText = document.getElementById('progress-text');

        form.addEventListener('submit', () => {
            progressContainer.style.display = 'block';
            progressBar.style.width = '0%';
            progressText.textContent = '0%';
            
            const eventSource = new EventSource('/progress');
            eventSource.onmessage = (event) => {
                const data = JSON.parse(event.data);
                progressBar.style.width = `${data.percent}%`;
                progressText.textContent = `${data.percent}%`;
                if (data.percent >= 100) {
                    eventSource.close();
                }
            };
        });
    </script>
</body>
</html>